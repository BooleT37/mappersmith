/*!
 * Mappersmith 2.26.0
 * https://github.com/tulios/mappersmith
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.mappersmith=e():t.mappersmith=e()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=4)}([function(module,__webpack_exports__,__webpack_require__){"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function toQueryString(t){return isPlainObject(t)?validKeys(t).map(function(e){return buildRecursive(e,t[e])}).join("&").replace(R20,"+"):t}function performanceNow(){return hasProcessHrtime()?(getNanoSeconds()-loadTime)/1e6:Date.now()}function parseResponseHeaders(t){var e={};if(!t)return e;for(var r=t.split("\r\n"),n=0;n<r.length;n++){var o=r[n],i=o.indexOf(": ");if(i>0){var s=o.substring(0,i).toLowerCase().trim(),a=o.substring(i+2).trim();e[s]=a}}return e}function lowerCaseObjectKeys(t){return Object.keys(t).reduce(function(e,r){return e[r.toLowerCase()]=t[r],e},{})}function isPlainObject(t){return"[object Object]"===toString.call(t)&&Object.getPrototypeOf(t)===Object.getPrototypeOf({})}__webpack_exports__.g=toQueryString,__webpack_exports__.f=performanceNow,__webpack_exports__.e=parseResponseHeaders,__webpack_exports__.d=lowerCaseObjectKeys,__webpack_require__.d(__webpack_exports__,"a",function(){return assign}),__webpack_exports__.c=isPlainObject,__webpack_require__.d(__webpack_exports__,"b",function(){return btoa});var _process,getNanoSeconds,loadTime;try{_process=eval('typeof __TEST_WEB__ === "undefined" && typeof process === "object" ? process : undefined')}catch(t){}var hasProcessHrtime=function(){return void 0!==_process&&null!==_process&&_process.hrtime};hasProcessHrtime()&&(getNanoSeconds=function(){var t=_process.hrtime();return 1e9*t[0]+t[1]},loadTime=getNanoSeconds());var R20=/%20/g,validKeys=function(t){return Object.keys(t).filter(function(e){return void 0!==t[e]&&null!==t[e]})},buildRecursive=function t(e,r,n){n=n||"";var o=Array.isArray(r),i="object"===_typeof(r);return o||i?o?r.map(function(r){return t(e,r,n+"[]")}).join("&"):validKeys(r).map(function(o){return t(e,r[o],n+"["+o+"]")}).join("&"):"".concat(encodeURIComponent(e+n),"=").concat(encodeURIComponent(r))},hasOwnProperty=Object.prototype.hasOwnProperty,assign=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},toString=Object.prototype.toString,CHARS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",btoa=function(t){for(var e,r,n="",o=CHARS,i=String(t),s=0;i.charAt(0|s)||(o="=",s%1);n+=o.charAt(63&e>>8-s%1*8)){if((r=i.charCodeAt(s+=.75))>255)throw new Error("[Mappersmith] 'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");e=e<<8|r}return n}},function(t,e,r){"use strict";function n(t){var e=function(){return a.gateway};return new o.a(t,e,a).build()}Object.defineProperty(e,"__esModule",{value:!0}),r.d(e,"version",function(){return s}),r.d(e,"configs",function(){return a}),r.d(e,"setContext",function(){return c}),e.default=n;var o=r(5),i=r(0),s="2.26.0",a={context:{},middleware:[],Promise:"function"==typeof Promise?Promise:null,fetch:"function"==typeof fetch?fetch:null,maxMiddlewareStackExecutionAllowed:2,gateway:null,gatewayConfigs:{emulateHTTP:!1,enableHTTP408OnTimeouts:!1,XHR:{withCredentials:!1,configure:null},HTTP:{configure:null},Fetch:{credentials:"omit"}}},c=function(t){a.context=Object(i.a)(a.context,t)}},function(t,e,r){"use strict";function n(t){return s(t)||i(t)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function i(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function s(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}function a(t,e,r,n,o){if(t.requestParams&&t.requestParams.auth){var i=Object(c.a)({},t.requestParams.auth,{password:"***"});this.originalRequest=t.enhance({auth:i})}else this.originalRequest=t;this.responseStatus=e,this.responseData=void 0!==r?r:null,this.responseHeaders=n||{},this.errors=o||[],this.timeElapsed=null}var c=r(0),u=/^application\/json/;a.prototype={request:function(){return this.originalRequest},status:function(){return 1223===this.responseStatus?204:this.responseStatus},success:function(){var t=this.status();return t>=200&&t<400},headers:function(){return Object(c.d)(this.responseHeaders)},header:function(t){return this.headers()[t.toLowerCase()]},rawData:function(){return this.responseData},data:function(){var t=this.responseData;if(this.isContentTypeJSON())try{t=JSON.parse(this.responseData)}catch(t){}return t},isContentTypeJSON:function(){return u.test(this.headers()["content-type"])},error:function(){var t=this.errors[this.errors.length-1]||null;return"string"==typeof t?new Error(t):t},enhance:function(t){return new a(this.request(),t.status||this.status(),t.rawData||this.rawData(),Object(c.a)({},this.headers(),t.headers),n(this.errors).concat([t.error]))}},e.a=a},function(t,e,r){"use strict";r.d(e,"b",function(){return n}),r.d(e,"a",function(){return o});var n=function(t){return t&&"TimeoutError"===t.name},o=function(t){var e=new Error(t);return e.name="TimeoutError",e}},function(module,exports,__webpack_require__){var lib=__webpack_require__(1),_process,defaultGateway;try{_process=eval('typeof process === "object" ? process : undefined')}catch(t){}"undefined"!=typeof XMLHttpRequest?defaultGateway=__webpack_require__(9).default:void 0!==_process&&(defaultGateway=__webpack_require__(11).default),lib.configs.gateway=defaultGateway,module.exports=lib},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function i(t,e,r){if(!t)throw new Error("[Mappersmith] invalid manifest (".concat(t,")"));if(!e||!e())throw new Error("[Mappersmith] gateway class not configured (configs.gateway)");this.Promise=r.Promise,this.manifest=new s.a(t,r),this.GatewayClassFactory=e,this.maxMiddlewareStackExecutionAllowed=r.maxMiddlewareStackExecutionAllowed}var s=r(6),a=r(8),c=r(0);i.prototype={build:function(){var t=this,e={_manifest:this.manifest};return this.manifest.eachResource(function(r,n){e[r]=t.buildResource(r,n)}),e},buildResource:function(t,e){var r=this;return e.reduce(function(e,n){return Object(c.a)(e,o({},n.name,function(e){var o=new a.a(n.descriptor,e);return r.invokeMiddlewares(t,n.name,o)}))},{})},invokeMiddlewares:function(t,e,r){var o=this,i=this.manifest.createMiddleware({resourceName:t,resourceMethod:e}),s=this.GatewayClassFactory(),c=this.manifest.gatewayConfigs,u=!1,h=function(t,e){return t.then(function(t){return e.request(t)}).catch(function(t){if(u)throw t;u=!0;var r=new Error('[Mappersmith] middleware "'.concat(e.__name,'" failed in the request phase: ').concat(t.message));throw r.stack=t.stack,r}).then(function(t){if(t instanceof a.a)return t;u=!0;var r=n(t),o="object"===r||"function"===r?t.name||r:r;throw new Error('[Mappersmith] middleware "'.concat(e.__name,'" should return "Request" but returned "').concat(o,'"'))}).then(function(t){return o.Promise.resolve(t)})},f=0,d=function t(){return i.reduce(h,o.Promise.resolve(r)).then(function(e){if(++f>o.maxMiddlewareStackExecutionAllowed)throw new Error("[Mappersmith] infinite loop detected (middleware stack invoked ".concat(f,' times). Check the use of "renew" in one of the middleware.'));var r=function(e,r){return function(){return r.response(e,t)}},n=function(){return new s(e,c).call()};return i.reduce(r,n)()})};return new this.Promise(function(t,e){d().then(function(e){return t(e)}).catch(e)})}},e.a=i},function(t,e,r){"use strict";function n(t){return s(t)||i(t)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function i(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function s(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}function a(t,e){var r=e.gatewayConfigs,o=void 0===r?null:r,i=e.middleware,s=void 0===i?[]:i,a=e.context,c=void 0===a?{}:a;this.host=t.host,this.bodyAttr=t.bodyAttr,this.headersAttr=t.headersAttr,this.authAttr=t.authAttr,this.timeoutAttr=t.timeoutAttr,this.clientId=t.clientId||null,this.gatewayConfigs=Object(u.a)({},o,t.gatewayConfigs),this.resources=t.resources||{},this.context=c;var h=t.middleware||t.middlewares||[];t.ignoreGlobalMiddleware?this.middleware=h:this.middleware=n(h).concat(n(s))}var c=r(7),u=r(0);a.prototype={eachResource:function(t){var e=this;Object.keys(this.resources).forEach(function(r){var n=e.eachMethod(r,function(t){return{name:t,descriptor:e.createMethodDescriptor(r,t)}});t(r,n)})},eachMethod:function(t,e){return Object.keys(this.resources[t]).map(e)},createMethodDescriptor:function(t,e){var r=this.resources[t][e];if(!r||!r.path)throw new Error('[Mappersmith] path is undefined for resource "'.concat(t,'" method "').concat(e,'"'));return new c.a(Object(u.a)({host:this.host,bodyAttr:this.bodyAttr,headersAttr:this.headersAttr,authAttr:this.authAttr,timeoutAttr:this.timeoutAttr},r))},createMiddleware:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=function(r){return Object(u.a)({__name:r.name||r.toString(),request:function(t){return t},response:function(t){return t()}},r(Object(u.a)(e,{clientId:t.clientId,context:Object(u.a)({},t.context)})))};return this.middleware.map(r)}},e.a=a},function(t,e,r){"use strict";function n(t){this.host=t.host,this.path=t.path,this.method=t.method||"get",this.headers=t.headers,this.params=t.params,this.queryParamAlias=t.queryParamAlias||{},this.binary=t.binary||!1,this.bodyAttr=t.bodyAttr||"body",this.headersAttr=t.headersAttr||"headers",this.authAttr=t.authAttr||"auth",this.timeoutAttr=t.timeoutAttr||"timeout"}e.a=n},function(t,e,r){"use strict";function n(t,e){this.methodDescriptor=t,this.requestParams=e||{}}var o=r(0),i=/{([^}]+)}/,s=/\/$/;n.prototype={params:function(){var t=this,e=Object(o.a)({},this.methodDescriptor.params,this.requestParams),r=function(e){return e!==t.methodDescriptor.headersAttr&&e!==t.methodDescriptor.bodyAttr&&e!==t.methodDescriptor.authAttr&&e!==t.methodDescriptor.timeoutAttr};return Object.keys(e).reduce(function(t,n){return r(n)&&(t[n]=e[n]),t},{})},method:function(){return this.methodDescriptor.method.toLowerCase()},host:function(){return(this.methodDescriptor.host||"").replace(s,"")},path:function(){var t=this,e=this.methodDescriptor.path;"/"!==this.methodDescriptor.path[0]&&(e="/".concat(this.methodDescriptor.path));var r=this.params();Object.keys(r).forEach(function(t){var n=r[t],o="{".concat(t,"}");new RegExp(o).test(e)&&(e=e.replace("{".concat(t,"}"),n),delete r[t])});var n=e.match(i);if(n)throw new Error("[Mappersmith] required parameter missing (".concat(n[1],'), "').concat(e,'" cannot be resolved'));var s=Object.keys(r).reduce(function(e,n){return e[t.methodDescriptor.queryParamAlias[n]||n]=r[n],e},{}),a=Object(o.g)(s);return 0!==a.length&&(e+="?".concat(a)),e},url:function(){return"".concat(this.host()).concat(this.path())},headers:function(){return Object(o.d)(Object(o.a)({},this.methodDescriptor.headers,this.requestParams[this.methodDescriptor.headersAttr]))},header:function(t){return this.headers()[t.toLowerCase()]},body:function(){return this.requestParams[this.methodDescriptor.bodyAttr]},auth:function(){return this.requestParams[this.methodDescriptor.authAttr]},timeout:function(){return this.requestParams[this.methodDescriptor.timeoutAttr]},enhance:function(t){var e=this.methodDescriptor.headersAttr,r=this.methodDescriptor.bodyAttr,i=this.methodDescriptor.authAttr,s=this.methodDescriptor.timeoutAttr,a=Object(o.a)({},this.requestParams,t.params);return a[e]=Object(o.a)({},this.requestParams[e],t.headers),t.body&&(a[r]=t.body),t.auth&&(a[i]=t.auth),t.timeout&&(a[s]=t.timeout),new n(this.methodDescriptor,a)},isBinary:function(){return this.methodDescriptor.binary}},e.a=n},function(t,e,r){"use strict";function n(t){o.a.apply(this,arguments)}Object.defineProperty(e,"__esModule",{value:!0});var o=r(10),i=r(2),s=r(0),a=r(3),c=window.btoa||s.b;n.prototype=o.a.extends({get:function(){var t=this.createXHR();t.open("GET",this.request.url(),!0),this.setHeaders(t,{}),this.configureTimeout(t),this.configureBinary(t),t.send()},head:function(){var t=this.createXHR();t.open("HEAD",this.request.url(),!0),this.setHeaders(t,{}),this.configureTimeout(t),this.configureBinary(t),t.send()},post:function(){this.performRequest("post")},put:function(){this.performRequest("put")},patch:function(){this.performRequest("patch")},delete:function(){this.performRequest("delete")},configureBinary:function(t){this.request.isBinary()&&(t.responseType="blob")},configureTimeout:function(t){var e=this;this.canceled=!1,this.timer=null;var r=this.request.timeout();r&&(t.timeout=r,t.addEventListener("timeout",function(){e.canceled=!0,clearTimeout(e.timer);var t=Object(a.a)("Timeout (".concat(r,"ms)"));e.dispatchClientError(t.message,t)}),this.timer=setTimeout(function(){e.canceled=!0;var t=Object(a.a)("Timeout (".concat(r,"ms)"));e.dispatchClientError(t.message,t)},r+1))},configureCallbacks:function(t){var e=this;t.addEventListener("load",function(){e.canceled||(clearTimeout(e.timer),e.dispatchResponse(e.createResponse(t)))}),t.addEventListener("error",function(r){if(!e.canceled){clearTimeout(e.timer);var n=r?r.message||r.name:t.responseText,o=n?": ".concat(n):"",i=new Error("".concat("Network error").concat(o));e.dispatchClientError("Network error",i)}});var r=this.options().XHR;r.withCredentials&&(t.withCredentials=!0),r.configure&&r.configure(t)},performRequest:function(t){var e=this.shouldEmulateHTTP()?"post":t,r=this.createXHR();r.open(e.toUpperCase(),this.request.url(),!0);var n={},o=this.prepareBody(t,n);this.setHeaders(r,n),this.configureTimeout(r),this.configureBinary(r);var i=[];o&&i.push(o),r.send.apply(r,i)},createResponse:function(t){var e=t.status,r=this.request.isBinary()?t.response:t.responseText,n=Object(s.e)(t.getAllResponseHeaders());return new i.a(this.request,e,r,n)},setHeaders:function(t,e){var r=this.request.auth();if(r){var n=r.username||"",o=r.password||"";e.authorization="Basic ".concat(c("".concat(n,":").concat(o)))}var i=Object(s.a)(e,this.request.headers());Object.keys(i).forEach(function(e){t.setRequestHeader(e,i[e])})},createXHR:function(){var t=new XMLHttpRequest;return this.configureCallbacks(t),t}}),e.default=n},function(t,e,r){"use strict";function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.request=t,this.configs=e,this.successCallback=function(){},this.failCallback=function(){}}var o=r(0),i=r(1),s=r(2),a=r(3),c=/^(delete|put|patch)/i;n.extends=function(t){return Object(o.a)({},n.prototype,t)},n.prototype={options:function(){return this.configs},shouldEmulateHTTP:function(){return this.options().emulateHTTP&&c.test(this.request.method())},call:function(){var t=this,e=arguments,r=Object(o.f)();return new i.configs.Promise(function(n,i){t.successCallback=function(t){t.timeElapsed=Object(o.f)()-r,n(t)},t.failCallback=function(t){t.timeElapsed=Object(o.f)()-r,i(t)};try{t[t.request.method()].apply(t,e)}catch(e){t.dispatchClientError(e.message,e)}})},dispatchResponse:function(t){t.success()?this.successCallback(t):this.failCallback(t)},dispatchClientError:function(t,e){Object(a.b)(e)&&this.options().enableHTTP408OnTimeouts?this.failCallback(new s.a(this.request,408,t,{},[e])):this.failCallback(new s.a(this.request,400,t,{},[e]))},prepareBody:function(t,e){var r=this.request.body();this.shouldEmulateHTTP()&&(r=r||{},Object(o.c)(r)&&(r._method=t),e["x-http-method-override"]=t);var n=Object(o.g)(r);return n&&Object(o.c)(r)&&(e["content-type"]="application/x-www-form-urlencoded;charset=utf-8"),n}},e.a=n},function(t,e){}])});
//# sourceMappingURL=mappersmith.map